---
title: Redis 知识体系
categories: [Backend, Redis]
tags: [redis]
date: 2023-07-06T19:24:40+800
last_modified_at: 
pin: false
---

# 持久化

- 数据结构

  - [跳跃表](https://juejin.cn/post/6998323950539243533)

# 高可用（主从，哨兵，集群）
## 主从模式
主节点可以读、写，从节点只能读
1. slave启动后，向master发送SYNC命令，master接收到SYNC命令后通过bgsave保存快照，并使用缓冲区记录保存快照这段时间内执行的写命令
2. master将保存的快照文件发送给slave，并继续记录执行的写命令
3. slave接收到快照文件后，加载快照文件，载入数据
4. master快照发送完后开始向slave发送缓冲区的写命令，slave接收命令并执行，完成复制初始化
5. 此后master每次执行一个写命令都会同步发送给slave，保持master与slave之间数据的一致性

## 哨兵模式
哨兵模式基于主从复制模式，只是引入了哨兵来监控与自动处理故障。

Redis 有事务但没有回滚，因为Redis认为事务的失败都是使用者造成的。

